{% extends "layouts/base.njk" %}

{% block script %}
    {{ super() }}
    <script type="module">
        import {
            createApp
        } from 'https://unpkg.com/petite-vue@0.4.1/dist/petite-vue.es.js'

        createApp({
            // exposed to all expressions
            words: ["For", "I", "stacked", "Where", "Smoking", "Cause", "And", "but", "what", "whoa", "Is", "Always", "Of", "before", "Remembering", "Deciding", "This", "Broken", "I'm", "You", "Wish", "Lets", "Holding", "There's", "Not", "Now", "So", "aw", "Calloused", "If", "Its", "They", "Any", "Fuck", "I'll", "Trying", "How", "Hindsight", "A", "Leeds", "To", "That", "Most", "We", "Til", "These", "Wont", "No", "We're", "From", "Live", "Ten", "Can't", "We've", "Just", "Jaded", "Tangled", "The", "They'll", "Good", "Go", "Nothing", "You'll", "Real", "afterall", "It", "Why", "When", "Don't", "Yes", "Punched", "In", "Losing", "Might", "Let", "Hate", "Gomorrah", "Take", "At", "Face-down", "face", "There", "Ever-present", "Underwater", "It's", "On", "I've", "Looking", "I'd", "Aimlessly", "Could", "Brain", "Reach", "No", "An", "She'd", "Her", "My", "Feeling", "Relax", "Drawing", "Focused", "Eclipse", "You're", "Jus", "All", "Making", "Hey!", "Someone", "Or", "never", "Without", "Burning", "yeah", "Find", "Moments", "Living", "Giving", "You've", "spit", "with", "Talk", "Time", "Hurry", "dont", "Walk", "Bowing", "Tell", "call", "again", "Stay", "Kill", "Shifting", "Please", "Away", "Should", "Oh", "Sorry", "Perpetually", "Have", "bashing", "Another", "about", "Tailspin", "breath", "nobody", "They're", "break", "scream", "Thing", "Microwave", "Thinking", "Maybe", "Like", "Pulling", "Every", "three", "thousand", "After", "oohh", "Lies", "pretend", "Lies!", "Ah", "Run", "Curtains", "Enter", "dead", "Intermission", "He", "Underspoken", "Focus", "Do", "out", "colors", "Wash", "later", "Help", "Cant", "Thats", "Wide", "Over", "Dormant", "Running", "closer", "Almost", "Staring", "Wine", "bring", "Can", "Give", "Put", "whistle", "praying", "keep", "Tripping", "Sing", "Falling", "Piece", "Taking", "stopped", "thought", "into", "Your", "leave", "years", "Coming", "reaching", "echoing", "curious", "Days", "competing", "feel", "got", "spent", "hope", "listening", "horrible", "twelve", "wasn't", "Glass", "took", "think", "as", "fade", "tight", "miss", "here's", "tired", "drain", "concentration", "steep", "straight", "kills", "fix", "people", "fill", "buy", "know", "places", "be", "need", "are", "matter", "town", "hour", "comprehend", "bleed", "we'll", "say", "drove", "by", "unfamiliar", "knew", "stage", "everyone", "clean", "finding", "changes", "life's", "am", "guess", "would", "anyone", "even", "didn't", "revert", "needed", "Start", "doesn't", "will", "down", "make", "try", "growing", "was", "Impulse", "point", "enough", "being", "walking", "intention", "gonna", "knife", "cut", "too", "says", "conscious", "she", "conflict", "internal", "steal", "hand", "longer", "more", "weakness", "achilles", "games", "been", "getting", "Waves", "everbody's", "kicking", "me", "one", "still", "went", "Back", "ready", "settling", "breaking", "everything", "they've", "shit", "motivate", "swear", "up", "gotta", "used", "didnt", "throught", "come", "long", "Calm", "had", "paradigm", "want", "hit", "everybody's", "Somebody", "uninspired", "stuck", "tearing", "permanent", "catch", "bad", "wanna", "validate", "digging", "planted", "knows", "justify", "crippled", "crossing", "dig", "cautionary", "force", "room", "day-old", "ask", "right", "then", "sick", "short", "air", "hard", "going", "miles", "who'd", "such", "jagged", "Guise", "look", "crooked", "really", "loved", "only", "Ho", "happens", "second", "past", "difference", "slipped", "Open", "seems", "pull", "Twenty", "set", "hero", "God", "takes", "hoping", "concentrate", "very", "place", "fading", "get", "gallon", "stick", "paint", "taken", "atonement", "shake", "everything's", "Awake", "order", "cracking", "lying", "slamming", "end", "holes", "scared", "saw", "grasping", "hesitation", "reevaluate", "forever", "together", "Photographs", "black", "quoting", "promises", "you'd", "weight", "whiskey", "wait", "fingers", "speak", "things", "ago", "hide", "letting", "solid", "Home", "wonder", "made", "least", "first", "poster", "Healthier", "handle", "roommate", "dick", "worth", "pop", "myself", "finally", "much", "saying", "who", "bullshit", "stepping", "lack", "may", "different", "concrete", "Pennsylvania", "precise", "around", "starting", "shifts", "here", "nights", "drive", "thanks", "faces", "lights", "Far", "way", "wasnt", "insane", "conversation", "has", "mean", "meant", "means", "wrote", "left", "hurts", "little", "well", "picture", "pile", "lie", "low", "sinking", "told", "asked", "somewhere", "dulled", "promise", "reaping", "seeds", "own", "struggle", "through", "heel", "year", "lot", "bend", "fractured", "antique", "proof", "friend", "starts", "hold", "yellin'", "bridge", "remember", "some", "standing", "something", "wanted", "broke", "assured", "messenger", "shouldn't", "pushing", "personal", "fed", "fifteen", "check", "stranger", "head", "imprint", "poor", "day", "train-wreck", "burns", "until", "doubt", "see", "defeat", "word", "tale", "struggling", "shitty", "hell", "fall", "laying", "dollar", "patch", "off", "gets", "plateau", "distances", "edge", "hundred", "cunning", "responsibility", "seap", "completely", "company", "slipping", "sincere", "doing", "hates", "forbid", "wrong", "moment", "pallet", "harbor", "alright", "great", "mild", "screaming", "quiet", "composure", "circles", "drugged", "night", "impossible", "avoid", "whatsoever", "erratic", "missing", "grounded", "liar", "loud", "liars", "poets", "yourself", "blur", "positive", "wings", "floor", "melody's", "listen", "ground", "grown", "hours", "than", "last", "probably", "stole", "lazy", "it", "empties", "songs", "eat", "busy", "anymore", "best", "better", "memory", "become", "conversations", "stings", "fucking", "staircase", "Turnpike", "pothole", "money", "amount", "gas", "pack", "measure", "explaination", "Behind", "care", "images", "once", "wires", "burn", "Katie", "wounds", "hits", "same", "underprepared", "reason", "necessary", "ever", "messing", "anything", "it'd", "while", "struggles", "realize", "tortured", "harder", "self", "note", "gun", "hanging", "spend", "blame", "thin", "free", "reach", "fun", "hardest", "both", "arm", "mind", "muscles", "blanks", "alone", "bones", "them", "photograph", "comes", "ones", "dust", "learn", "scores", "cared", "life", "changing", "door", "score", "hear", "smile", "eyes", "golf", "watch", "part", "sitting", "waste", "shotgun", "reoccurring", "exhaustion", "twice", "write", "posture", "gives", "writing", "slow", "tear", "safe", "hole", "few", "started", "local", "did", "store", "slowly", "barely", "compliments", "climbing", "throat", "ebbing", "known", "performance", "act", "single", "aberration", "forgive", "forgive", "for-", "himself", "scheme", "arrow", "target", "done", "hands", "wasting", "fine", "sometimes", "lower", "bottom", "stop", "possible", "mercy", "sleep", "shivers", "fraud", "coward", "stain", "straws", "bet", "foundations", "boys", "salvation", "shoes", "white", "compelled", "move", "weeks", "cautiously", "grow", "goes", "decisions", "moved", "boxes", "Fascism", "semester", "bum", "acoustic", "today", "brochure", "forget", "anyway", "were", "said", "motivation", "aspiration", "sake", "church", "tank", "treasure", "overdue", "meaningless", "us", "permission", "empty", "Holmes", "failures", "role", "define", "confidence", "stare", "bit", "shore", "makes", "rope", "sew", "her", "yours", "city", "cold", "kisses", "understand", "forcing", "stand", "all", "lost", "centered", "crashing", "front", "ahead", "tonight", "plans", "beer", "seem", "weather", "club", "beneath", "glad", "solitary", "dream", "times", "delusions", "seams", "hopeless", "finger", "pay", "decline", "tragic", "feet", "seat", "deep", "beat", "knees", "breeze", "Ts", "inside", "two", "chance", "pity", "play", "spinning", "band", "wake", "coffee", "ceiling", "jump", "hack", "react", "silence", "underneath", "mountains", "lungs", "perspective", "Christ", "rounded", "calls", "shoulder", "knack", "norm", "attention", "ADD", "myself", "crutch", "chair", "angry", "change", "healthy", "phrase", "disease", "kind", "ways", "week", "turning", "pause", "afterglow", "formation", "bummer", "hair", "staying", "cell", "versions", "two", "line", "cigarettes", "came", "discussions", "words", "instead", "dark", "kid", "skin", "cups", "reaches", "bigger", "wall", "bear", "fair", "war", "sore", "already", "progress", "biggest", "choices", "tie", "use", "aunt", "striking", "undone", "okay", "above", "gone", "car", "telling", "shed", "hang", "type", "teeth", "minute", "brains", "isolated", "comnclusion", "wanna-be", "carpet", "sob", "many", "rest", "fan", "jacket", "uphill", "lips", "flowing", "our", "mend", "begin", "id", "show", "other", "grasp", "pass", "me", "familiar", "idiot", "ecclectic", "gasoline", "climb", "skull", "bomb", "man", "palms", "jaws", "vacant", "vagrant", "vagrants", "lighter", "fighter", "hurt", "phone", "papers", "months", "devoid", "worst", "new", "heal", "turned", "expectations", "leaving", "hide", "mark", "drawer", "next", "prayer", "happy", "sad", "steps", "hold", "ache", "fight", "fallen", "kite", "beaten", "torn", "mess", "hangin'", "babysitting", "turn", "all", "cieling", "stupid", "rhyme", "story", "sheets", "here", "feed", "battle", "fantisize", "dear", "admit", "along", "bitter", "feels", "shelter", "water", "moving", "spine", "bloodline", "I", "supposed", "van", "chest", "mistake", "budget", "thoughts", "dead", "name", "looks", "shook", "else", "form", "chords", "reclaim", "won", "royal", "strings", "freaking", "mouth", "higher", "long", "wing", "disguise", "gave", "esteem", "pressure", "clever", "time", "below", "side", "spending", "basis", "cannot", "plan", "high", "parts", "whole", "faded", "events", "professional", "life", "save", "loathing", "explain", "view", "win", "scar", "cracks", "friends", "stories", "flat", "bleeding", "corner", "corners", "no", "know", "return", "claws", "fault", "deserve", "shut", "touch", "eye", "mind"],
            number: 5,
            type: 'words',
            output: [],
            // getters
            get loremipsum() {
                return typeof this.output === "object" ?
                    this.output.join(" ") : this.output
            },
            // methods
            randomNumber(min = 3, max = 20) {
                min = Math.ceil(min);
                max = Math.floor(max);
                return Math.floor(Math.random() * (max - min + 1)) + min;
            },
            generate() {
                if (this.number > 250) {
                    this.output = "Hey now, don't try to generate more than 250 of whatever you want, okay?";
                    return;
                }
                this.output = [];
                switch (this.type) {
                    case "words":
                        for (let x = 0; x < this.number; x++) {
                            let word = this.words[Math.floor(Math.random() * this.words.length)];
                            this.output.push(word.toLowerCase());
                        }
                        break;
                    case "sentences":
                        let sentence = [];
                        for (let x = 0; x < this.number; x++) {
                            let wordcount = this.randomNumber();
                            for (let y = 0; y < wordcount; y++) {
                                let word = this.words[Math.floor(Math.random() * this.words.length)];
                                if (y === 0) {
                                    let capital = word.charAt(0).toUpperCase() + word.slice(1);
                                    sentence.push(capital)
                                } else if (y === wordcount - 1) {
                                    sentence.push(word.toLowerCase() + ".")
                                } else {
                                    sentence.push(word.toLowerCase());
                                }
                            }
                            this.output.push(sentence.join(" "));
                            sentence = [];
                        }
                        break;
                    default:
                        this.output = "Woops, something went wrong!"
                }
            }
        }).mount()
    </script>
{% endblock %}

{% block content %}
    <header class="flex-center">
        {% include "partials/logo.njk" %}
    </header>
    <main class="flex-center col full">
        <div class="wrapper" data-constrain="more">
            <h1 class="center">Song Generator</h1>
            <div v-scope id="app">
                <label>What do you want?
                    <select v-model="type" @keyup.enter="generate">
                        <option value="words">Words</option>
                        <option value="sentences">Sentences</option>
                    </select>
                </label>
                <label>How many of them?
                    <input type="number" v-model="number" @keyup.enter="generate" autofocus>
                </label>
                <button @click="generate">Generate</button>
                <p>{% raw %}{{ loremipsum }}{% endraw %}</p>
            </div>
        </div>
    </main>
{% endblock %}

{% block style %}
    {{ super() }}
    <style>
        #app {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        #app label {
            display: flex;
            flex-direction: column;
            font-size: var(--step-2);
            margin-inline: auto;
            max-inline-size: max-content;
        }

        #app :is(label, input, button) {
            font-family: var(--headings);
        }

        #app button {
            font-size: var(--step-1);
            margin-inline: auto;
            max-inline-size: max-content;
        }
    </style>
{% endblock %}
